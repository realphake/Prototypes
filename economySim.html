<!DOCTYPE html>
<html lang="en"><body>

<script src="genericFunctions.js"></script>
<script>
function copy(obj) {
	var copiedObj = {};
	for (thing in obj) {
		copiedObj[thing] = obj[thing];
	}
	return copiedObj;
}

var previousKeysDown = copy(keysDown);

var gold = 1000; var wood = 15; var food = 100;
var houses = 0; var restaurants = 0; var lumberjacks = 0;

var taxToPay = 0.05;
var foodMadePerRestaurant = 0.05;
var taxGetPerHouse = 0.01; 
var foodPerHouse = 0.01;
var woodPerLumberjack = 0.01;

function update () { 
	gold -= taxToPay;
	gold += houses * taxGetPerHouse;
	food -= houses * foodPerHouse;
	food += restaurants * foodMadePerRestaurant;
	wood += lumberjacks * woodPerLumberjack;
	if (food > 100) food = 100;
	
	if ( 72 in keysDown ) {
		if ( !(72 in previousKeysDown) ) {
			if (gold >= 20 && wood >= 5) {
				houses += 1;
				gold -= 20;
				wood -= 5;
			}
		}
	}
	if ( 82 in keysDown ) {
		if ( !(82 in previousKeysDown) ) {
			if (gold >= 20 && wood >= 10) {
				restaurants += 1;
				gold -= 20;
				wood -= 10;
			}
		}
	}
	if ( 76 in keysDown ) {
		if ( !(76 in previousKeysDown) ) {
			if (gold >= 20 && wood >= 5) {
				lumberjacks += 1;
				gold -= 20;
				wood -= 5;
			}
		}
	}
	previousKeysDown = copy(keysDown);
}
function render () { 
	clear();
	writeText("Gold: "+Math.round(gold),20,20, "black");
	writeText("Wood: "+Math.round(wood),20,40, "black");
	writeText("Food: "+Math.round(food),20,60, "black");
	
	writeText("Houses: "+houses,100,20, "black");
	writeText("Restaurants: "+restaurants,100,40, "black");
	writeText("Lumberjacks: "+lumberjacks,100,60, "black");
	
	writeText("H: build a house",200,400, "black");
	writeText("R: build a restaurant",200,420, "black");
	writeText("L: build a lumberjack's",200,440, "black");
}



setInterval(function () { update(); render(); }, 20);

</script>

</body></html>
